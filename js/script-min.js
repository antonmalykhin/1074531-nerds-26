var lastFocusedElement,contactButtonOpen=document.querySelector(".contacts__btn"),contactWindow=document.querySelector(".write-us"),contactButtonClose=contactWindow.querySelector(".close__btn"),contactForm=contactWindow.querySelector(".write-us__form"),nameField=contactWindow.querySelector("[name=name]"),emailField=contactWindow.querySelector("[name=email]"),messageField=contactWindow.querySelector("[name=message]"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contactButtonOpen.addEventListener("click",function(e){e.preventDefault(),lastFocusedElement=document.activeElement,contactWindow.classList.add("modal-show"),storageName||storageEmail?(nameField.value=storageName,emailField.value=storageEmail,messageField.focus()):nameField.focus()}),contactButtonClose.addEventListener("click",function(e){e.preventDefault(),contactWindow.classList.remove("modal-show"),contactWindow.classList.remove("modal-error"),lastFocusedElement.focus()}),contactForm.addEventListener("submit",function(e){nameField.value&&emailField.value&&messageField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),contactWindow.classList.remove("modal-error"),contactWindow.offsetWidth=contactWindow.offsetWidth,contactWindow.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),contactWindow.classList.contains("modal-show")&&(contactWindow.classList.remove("modal-show"),contactWindow.classList.remove("modal-error"),lastFocusedElement.focus()))});
